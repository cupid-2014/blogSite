### spring boot使用Redis

#### CentOS 7下安装Redis
* 下载地址：[https://download.redis.io/releases/](https://download.redis.io/releases/)
* 下载：`# wget https://download.redis.io/releases/redis-6.2.4.tar.gz` 
* 解压：`# tar -zxvf redis-6.2.4.tar.gz`
* 进入目录，`# cd redis-6.2.4`，后执行编译`# make`
* 安装并指定安装目录`# make install PREFIX=/usr/local/redis`
* 进入安装目录`# cd /usr/local/redis/bin/`后启动服务`# ./redis-server`，这种方式为前台启动
* 后台启动redis  
  1. 从redis源码目录中赋值reids.conf到reids的安装目录`# cp /temp/redis-6.2.4/redis.conf /usr/local/redis/bin/`  
  2. 修改 `redis.conf` 文件，把 `daemonize no` 改为 `daemonize yes`  
  3. 后台启动`# ./redis-server redis.conf`  
  4. 查看是否启动成功`# ps -ef | grep redis`  
* 连接本地redis方法`# ./redis-cli -h 127.0.0.1 -p 6379`， `./redis-cli -h ip地址 -p 端口号`
* 停止`# ./redis-cli shutdown`，有时候停不了，不知道为什么



#### 最终方案
* NAS安装redis，然后通过nginx进行代理
  
```conf
stream {

  server {
          listen 6379;
          proxy_connect_timeout 1s;
          proxy_timeout 3s;
          proxy_pass redis;
  }

  upstream redis {
          server 101.40.21.39:6379 max_fails=3 fail_timeout=30s; # 101.40.21.39 为redis所在服务器的ip地址
  }

}
```




#### 参考文档
* [Redis 教程](https://www.runoob.com/redis/redis-tutorial.html)
* [Centos7安装Redis](https://www.cnblogs.com/heqiuyong/p/10463334.html)

  
[上一篇：spring boot中Controller获取前台参数方式](201906003.md)  [下一篇：spring boot集成shiro](201906004.md) 
  
[首页](../../../README.md) > [学习总览](../../../introduction/studyCatalogList.md) > [开发语言](../developmentLanguage.md) > [Java](java.md)  
